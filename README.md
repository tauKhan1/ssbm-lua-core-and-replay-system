# ssbm-lua-core-and-replay-system
Core functions for creating SSBM TASes with LUA core dolphin (https://github.com/SwareJonge/Dolphin-Lua-Core), and replay utility system involving a gecko code that makes melee save inputs used during match into dolphin memory, and lua scripts to extract the saved inputs into readable and editable script, and one to replay such script.

## Usage
Copy the folders or their contents to the root directory of your lua core Dolphin. The gecko code required, InputSaver, to save replays can be found in Sys/Gamesettings/GALE01.ini . If SSBM is played with InputSaver on, then during any match script input_saver.lua can be run to extract the inputs used so far in that match to /Sys/Scripts/inputfiles/inputs.lua . Only inputs progressing the game are being saved, so one can make TAS using Melee's own develop mode frame advance, while the replay can be played in real time later. The save replay may also of course be used in frame advance mode, if you wish to go back and modify your TAS from the middle and lack a savestate to do so conveniently. Inputs saved within Melee reset at the start of each match.
The produced input scripts consists of list of commands. The general format for the commands are name, duration in frames, parameters. The input script can be replayed by using a core module input_runner.lua . The module provides 2 main functions: interpretInputfile with input file name parameter, which reads input file in /Sys/Scripts/inputfiles/ and turns it into executable controller input list when called once at beginning. 2nd function executeInputs will then use that list to execute inputs from the index according to parameter. If the index is out of bounds, no inputs will be made.

The pichubtt.lua script is provided as an replay example, it'll play back the inputs used in PTAS's pichu btt world record. pichubttFrameAdvance.lua is an example to showcase how the replay can be used in frame advance mode.
